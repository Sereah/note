## 视频基础

### 图像基础

#### 像素

- 存储RGB值，RGB24使用三字节存储，RGB32使用四字节存储，增加一个透明度。

#### 分辨率

- 像素点的宽 x 高

#### 颜色模型

##### RGB 

##### YUV

###### 概念

- 人眼对亮度比对色度更加的敏感，保持亮度情况下减少色度几乎看不出来，这就可以对色度进行压缩。

###### 组成

- Y：亮度分量，表示画面的明暗信息，灰度。Y = 0.299R + 0.587G + 0.114B（BT.601标准）

- U/Cb：蓝色色度分量，表示蓝色和亮色的差异。U = 0.492（B - Y）（BT.601标准）

- V/Cr：红色色度分量，表示红色和亮度的差异。V = 0.877（R - Y）（BT.601标准）

###### 采样

- 标记方式：4:a:b。规定一行4个像素，两行8个像素一组。4表示一行4个像素；a表示第一行中色度V和U采样了几次；b表示下一行中色度采样了几次。

- 4:4:4采样：每个像素都对色度采样，没有下采样。

- 4:2:2采样：第一行一半对色度采样，第二行也是。示例：第一行(Y0, U0, V0), (Y1, U0, V0), (Y2, U1, V1), (Y3, U1, V1)，下一行类似的独立采样。

- 4:2:0采样：第一行采样两次，第二行复用第一行的色度采样。然后依次用8个像素一组的采样下去。

###### 标准

- 不同清晰度标准里，RGB到YUV的转换系数不同。


### 视频的组成

#### 帧

- 每一张图片就是一帧。

#### 帧率

- 每秒多少帧。

### 核心数据指标

#### 码率

- 每秒传输的数据类，单位 kbps/mbps。


### 视频压缩原理

#### 基本思路-去掉冗余

##### 空间冗余

- 一帧画面里，临近像素相似。解决办法：用变换、预测。

##### 时间冗余

- 连续帧变化不大。解决办法：只存变化帧。

##### 感知冗余

- 人眼对亮度更敏感。解决办法：使用YUV模型对色度向下采样。

#### 压缩流程

##### 预处理

- YUV 采样，减少50%的空间。

##### 预测

- 帧内预测：根据同一帧的邻居像素预测。减少空间冗余。

- 帧间预测：利用前后帧的运动信息预测。减少时间冗余。

- 预测后存储预测值和原始值的差值，叫预测残差，节省比特率。

##### 变换

- 对预测残差做DCT（余弦离散变换）或类似转换。即把空间域的像素值变成频率域系数。

##### 量化

- 把变换后的系数按矩阵缩小，舍入，高频大部分变成了0。

- 丢掉高频信息，人眼不敏感。（有损压缩的主要来源）

##### 熵编码

- 将量化后的数据用无损压缩算法，减少比特流。

#### 帧类型

##### I帧

- 关键帧，自包含，可独立解码。

##### P帧

- 参考前面的帧，只存差异。

##### B帧

- 参考前后两帧，压缩率最高。

#### GOP

##### 概念

- 一组连续的帧，视频编码处理的最小单位。

##### 构成

- 由三种帧类型构成，定时出现关键帧，减少误差，大量的P帧和B帧节省了空间。

- 两个I帧之间的距离称为GOP的长度，长度越长，压缩率越高。